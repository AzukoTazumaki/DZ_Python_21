{% block add_employee_to_csv %}
<div class="row d-flex align-items-center justify-content-between code_description mt-4">
    <div class="col-4">
        <h5>Метод добавления сотрудника</h5>
        <hr>
        <p class="mt-3">
            В методе <span class="help_translate">add_employee_to_csv()</span> распаковывается 
            словарь из формы на все 8 составляющих, описанных ранее. Затем снова создается 
            список колонок и список с информацией о сотруднике, куда добавляются все элементы. 
            Затем список отправляется в метод <span class="help_translate">check_unknown_fields()</span>, 
            откуда возвращается отформатированный список. В конце создается <span class="help_translate">DataFrame</span>, 
            в который добавляются колонки и отформатированный список, и записывается в файл (используем mode='a', чтобы 
            не перезаписывать файл).
        </p>
    </div>
    <div class="col-8">
        <div class="highlight" style="background: #fdf6e3; border-radius: 8px;border: 1px solid grey;padding: 15px"><pre style="line-height: 125%;"><span></span>
<span style="color: #859900">def</span> <span style="color: #268bd2">add_employee_to_csv</span><span style="color: #657b83">(</span><span style="color: #268bd2">self</span><span style="color: #657b83">):</span> 
    <span style="color: #657b83">full_name:</span> <span style="color: #268bd2">str</span> <span style="color: #93a1a1">=</span> \ 
        <span style="color: #268bd2">self</span><span style="color: #93a1a1">.</span><span style="color: #657b83">form_info[</span><span style="color: #2aa198">&#39;employee_first_name&#39;</span><span style="color: #657b83">]</span><span style="color: #93a1a1">.</span><span style="color: #657b83">capitalize()</span> <span style="color: #93a1a1">+</span> <span style="color: #2aa198">&#39; &#39;</span> <span style="color: #93a1a1">+</span> \ 
        <span style="color: #268bd2">self</span><span style="color: #93a1a1">.</span><span style="color: #657b83">form_info[</span><span style="color: #2aa198">&#39;employee_last_name&#39;</span><span style="color: #657b83">]</span><span style="color: #93a1a1">.</span><span style="color: #657b83">capitalize()</span> <span style="color: #93a1a1">+</span> <span style="color: #2aa198">&#39; &#39;</span> <span style="color: #93a1a1">+</span> \ 
        <span style="color: #268bd2">self</span><span style="color: #93a1a1">.</span><span style="color: #657b83">form_info[</span><span style="color: #2aa198">&#39;employee_surname&#39;</span><span style="color: #657b83">]</span><span style="color: #93a1a1">.</span><span style="color: #657b83">capitalize()</span> 
    <span style="color: #657b83">phone:</span> <span style="color: #268bd2">str</span> <span style="color: #93a1a1">=</span> <span style="color: #268bd2">self</span><span style="color: #93a1a1">.</span><span style="color: #657b83">form_info[</span><span style="color: #2aa198">&#39;employee_phone_number&#39;</span><span style="color: #657b83">]</span> 
    <span style="color: #657b83">email:</span> <span style="color: #268bd2">str</span> <span style="color: #93a1a1">=</span> <span style="color: #268bd2">self</span><span style="color: #93a1a1">.</span><span style="color: #657b83">form_info[</span><span style="color: #2aa198">&#39;employee_email&#39;</span><span style="color: #657b83">]</span> 
    <span style="color: #657b83">age:</span> <span style="color: #268bd2">str</span> <span style="color: #93a1a1">=</span> <span style="color: #268bd2">self</span><span style="color: #93a1a1">.</span><span style="color: #657b83">form_info[</span><span style="color: #2aa198">&#39;employee_age&#39;</span><span style="color: #657b83">]</span> 
    <span style="color: #657b83">occupation:</span> <span style="color: #268bd2">str</span> <span style="color: #93a1a1">=</span> <span style="color: #268bd2">self</span><span style="color: #93a1a1">.</span><span style="color: #657b83">form_info[</span><span style="color: #2aa198">&#39;employee_occupation&#39;</span><span style="color: #657b83">]</span> 
    <span style="color: #657b83">nationality:</span> <span style="color: #268bd2">str</span> <span style="color: #93a1a1">=</span> <span style="color: #268bd2">self</span><span style="color: #93a1a1">.</span><span style="color: #657b83">form_info[</span><span style="color: #2aa198">&#39;employee_nationality&#39;</span><span style="color: #657b83">]</span> 
    <span style="color: #657b83">university:</span> <span style="color: #268bd2">str</span> <span style="color: #93a1a1">=</span> <span style="color: #268bd2">self</span><span style="color: #93a1a1">.</span><span style="color: #657b83">form_info[</span><span style="color: #2aa198">&#39;employee_university&#39;</span><span style="color: #657b83">]</span> 
    <span style="color: #657b83">work_experience:</span> <span style="color: #268bd2">str</span> <span style="color: #93a1a1">=</span> <span style="color: #268bd2">self</span><span style="color: #93a1a1">.</span><span style="color: #657b83">form_info[</span><span style="color: #2aa198">&#39;employee_work_experience&#39;</span><span style="color: #657b83">]</span> 
    <span style="color: #657b83">columns:</span> <span style="color: #268bd2">list</span> <span style="color: #93a1a1">=</span> <span style="color: #657b83">[</span><span style="color: #2aa198">&#39;Name&#39;</span><span style="color: #657b83">,</span> <span style="color: #2aa198">&#39;Phone&#39;</span><span style="color: #657b83">,</span> <span style="color: #2aa198">&#39;Email&#39;</span><span style="color: #657b83">,</span> <span style="color: #2aa198">&#39;Age&#39;</span><span style="color: #657b83">,</span> <span style="color: #2aa198">&#39;Occupation&#39;</span><span style="color: #657b83">,</span> <span style="color: #2aa198">&#39;Nationality&#39;</span><span style="color: #657b83">,</span> <span style="color: #2aa198">&#39;University&#39;</span><span style="color: #657b83">,</span> <span style="color: #2aa198">&#39;Work Experience&#39;</span><span style="color: #657b83">]</span> 
    <span style="color: #657b83">new_employee_info:</span> <span style="color: #268bd2">list</span> <span style="color: #93a1a1">=</span> <span style="color: #657b83">[</span> 
        <span style="color: #657b83">full_name,</span> <span style="color: #657b83">phone,</span> <span style="color: #657b83">email,</span> <span style="color: #657b83">age,</span> 
        <span style="color: #657b83">occupation,</span> <span style="color: #657b83">nationality,</span> <span style="color: #657b83">university,</span> <span style="color: #657b83">work_experience</span> 
    <span style="color: #657b83">]</span> 
    <span style="color: #657b83">check_employee_info:</span> <span style="color: #268bd2">list</span> <span style="color: #93a1a1">=</span> <span style="color: #268bd2">self</span><span style="color: #93a1a1">.</span><span style="color: #657b83">check_unknown_fields(new_employee_info)</span> 
    <span style="color: #657b83">df_a</span> <span style="color: #93a1a1">=</span> <span style="color: #657b83">pd</span><span style="color: #93a1a1">.</span><span style="color: #657b83">DataFrame([check_employee_info],</span> <span style="color: #657b83">columns</span><span style="color: #93a1a1">=</span><span style="color: #657b83">columns)</span> 
    <span style="color: #657b83">df_a</span><span style="color: #93a1a1">.</span><span style="color: #657b83">to_csv(</span><span style="color: #2aa198">&#39;results/employees.csv&#39;</span><span style="color: #657b83">,</span> <span style="color: #657b83">mode</span><span style="color: #93a1a1">=</span><span style="color: #2aa198">&#39;a&#39;</span><span style="color: #657b83">,</span> <span style="color: #657b83">index</span><span style="color: #93a1a1">=</span><span style="color: #2aa198">False</span><span style="color: #657b83">,</span> <span style="color: #657b83">header</span><span style="color: #93a1a1">=</span><span style="color: #2aa198">False</span><span style="color: #657b83">)</span> 
    <span style="color: #859900">return</span> <span style="color: #268bd2">self</span><span style="color: #93a1a1">.</span><span style="color: #657b83">read_csv_to_html()</span></pre></div>
    </div>
</div>
{% endblock %}